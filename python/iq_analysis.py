import numpy as np
import scipy
import matplotlib.pyplot as plt
import math

tx_iq = [32766, 0, 32362, 5125, 31162, 10125, 29194, 14875, 26508, 19259, 23169, 23169, 19259, 26508, 14875, 29194,
  10125, 31162, 5125, 32362, 0, 32766, -5125, 32362, -10125, 31162, -14875, 29194, -19259, 26508, -23169, 23169,
  -26508, 19259, -29194, 14875, -31162, 10125, -32362, 5125, -32766, 0, -32362, -5125, -31162, -10125, -29194,
  -14875, -26508, -19259, -23169, -23169, -19259, -26508, -14875, -29194, -10125, -31162, -5125, -32362, 0,
  -32766, 5125, -32362, 10125, -31162, 14875, -29194, 19259, -26508, 23169, -23169, 26508, -19259, 29194, -14875,
  31162, -10125, 32362, -5125, 32766, 0, 32362, 5125, 31162, 10125, 29194, 14875, 26508, 19259, 23169, 23169,
  19259, 26508, 14875, 29194, 10125, 31162, 5125, 32362, 0, 32766, -5125, 32362, -10125, 31162, -14875, 29194,
  -19259, 26508, -23169, 23169, -26508, 19259, -29194, 14875, -31162, 10125, -32362, 5125, -32766, 0, -32362,
  -5125, -31162, -10125, -29194, -14875, -26508, -19259, -23169, -23169, -19259, -26508, -14875, -29194, -10125,
  -31162, -5125, -32362, 0, -32766, 5125, -32362, 10125, -31162, 14875, -29194, 19259, -26508, 23169, -23169,
  26508, -19259, 29194, -14875, 31162, -10125, 32362, -5125, 32766, 0, 32362, 5125, 31162, 10125, 29194, 14875,
  26508, 19259, 23169, 23169, 19259, 26508, 14875, 29194, 10125, 31162, 5125, 32362, 0, 32766, -5125, 32362,
  -10125, 31162, -14875, 29194, -19259, 26508, -23169, 23169, -26508, 19259, -29194, 14875, -31162, 10125, -32362,
  5125]


if __name__ == "__main__":

    n_iq = math.floor(len(tx_iq)/2)
    tx_complex = np.zeros(shape=[n_iq], dtype=complex)

    for i in range(0, len(tx_iq), 2):
        out_i = math.floor(i/2)
        tx_complex[out_i] = tx_iq[i] + 1j*tx_iq[i+1]

    iq_real = tx_iq[0:len(tx_iq):2]
    iq_imag = tx_iq[1:len(tx_iq):2]

    iq_fft = np.abs(np.fft.fftshift(np.fft.fft(tx_complex)))
    freqs = np.fft.fftshift(np.fft.fftfreq(n_iq, 1/96000))

    plt.plot(iq_real)
    plt.plot(iq_imag)

    plt.figure()
    plt.plot(np.abs(tx_complex))

    plt.figure()
    plt.plot(freqs, iq_fft)
    plt.show()
